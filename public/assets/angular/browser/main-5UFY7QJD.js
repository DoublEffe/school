import{D as V,E as I,F as M,K as H,b as U,c as _,d as q,e as E,g as A,h as g,i as B,j,k as h,l,m as b,n as w,o as x,p as s,r as F,s as S,t as T,u as O,v as P,z as N}from"./chunk-6NRO5LWC.js";import{Db as C,Ob as a,Va as u,Wa as c,Y as v,ba as k,fa as p,ga as y,kb as d,vb as r,wb as m,xb as f}from"./chunk-6W7VELQ7.js";var D=(t,e)=>{let R=k(h),i=t.data.expectedHomeType,o=R.GetAccountType();return!0};var L=(()=>{let e=class e{constructor(i,o){this.auth=i,this.router=o,this.loginForm=new x({email:new s("",l.required),password:new s("",l.required),accountType:new s("",l.required)}),this.options=[{text:"Seleziona un opzione",value:null,selected:!0,disabled:!0},{text:"Studente",value:"Studente",selected:!1,disabled:!1},{text:"Insegnante",value:"Insegnante",selected:!1,disabled:!1}]}ngOnInit(){this.auth.getCsrfToken().subscribe(i=>console.log(i))}logIn(){let i={email:this.loginForm.value.email,password:this.loginForm.value.password,type:this.loginForm.value.accountType};this.auth.logIn(i,this.header).subscribe(o=>{this.auth.setUser(this.loginForm.value.accountType.toLowerCase());let n=this.auth.GetAccountType();n==="studente"?this.router.navigate(["/studenti"]):n==="insegnante"&&this.router.navigate(["/insegnanti"])})}test(){let i={type:this.selectedValue.toLowerCase()};this.auth.setUserTable(i).subscribe(o=>this.auth.getCsrfToken().subscribe(n=>console.log(n)))}};e.\u0275fac=function(o){return new(o||e)(c(h),c(g))},e.\u0275cmp=p({type:e,selectors:[["app-login"]],decls:22,vars:2,consts:[["id","background-div",1,"d-flex"],["id","welcome-div",1,"col-6","d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column"],[1,"text-center"],["id","login-div",1,"col-6","d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column",3,"formGroup"],["label","Email","formControlName","email"],["label","Password","formControlName","password"],["label","tipologia account","formControlName","accountType",3,"options"],["itButton","primary","type","submit",3,"click"],["routerLink","/registrati"]],template:function(o,n){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),a(4,"Benvenuti"),m(),r(5,"p",3),a(6," questa piattaforma mira a sostenere sia studenti che insegnanti. "),m()()(),r(7,"div",4)(8,"div",2)(9,"h3",3),a(10,"Login"),m(),r(11,"form",5),f(12,"it-input",6)(13,"it-input",7)(14,"it-select",8),r(15,"button",9),C("click",function(){return n.logIn()}),a(16,"Log In"),m()(),r(17,"p"),a(18,"Non sei registrato? "),r(19,"span")(20,"a",10),a(21,"Registrati"),m()()()()()()),o&2&&(u(11),d("formGroup",n.loginForm),u(3),d("options",n.options))},dependencies:[B,N,I,M,F,b,w,S,T],styles:["#welcome-div[_ngcontent-%COMP%]{background-color:#0ff;height:100vh}#login-div[_ngcontent-%COMP%]{height:100vh}"]});let t=e;return t})();var K=(()=>{let e=class e{constructor(i,o){this.auth=i,this.router=o,this.signupForm=new x({nome:new s("",l.required),cognome:new s("",l.required),email:new s("",V.email),password:new s("",l.required),password_confirmation:new s("",l.required),accountType:new s("",l.required)}),this.options=[{text:"Seleziona un opzione",value:null,selected:!0,disabled:!0},{text:"Studente",value:"Studente",selected:!1,disabled:!1},{text:"Insegnante",value:"Insegnante",selected:!1,disabled:!1}]}ngOnInit(){this.auth.getCsrfToken().subscribe(i=>console.log(i))}signUp(){let i={name:this.signupForm.value.nome,surname:this.signupForm.value.cognome,email:this.signupForm.value.email,password:this.signupForm.value.password,password_confirmation:this.signupForm.value.password,type:this.signupForm.value.accountType};this.auth.signUp(i).subscribe(o=>{this.auth.setUser(this.signupForm.value.accountType.toLowerCase());let n=this.auth.GetAccountType();n==="studente"?this.router.navigate(["/studenti"]):n==="insegnante"&&this.router.navigate(["/insegnanti"])})}};e.\u0275fac=function(o){return new(o||e)(c(h),c(g))},e.\u0275cmp=p({type:e,selectors:[["app-sign-up"]],decls:13,vars:2,consts:[["id","signup-div",1,"d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column"],[1,"text-center"],[1,"d-flex","flex-column",3,"formGroup"],["label","Nome","formControlName","nome"],["label","Cognome","formControlName","cognome"],["label","Email","formControlName","email"],["label","Password","formControlName","password"],["label","Password","formControlName","password_confirmation"],["label","tipologia account","formControlName","accountType",3,"options"],["itButton","primary","type","submit",3,"click"]],template:function(o,n){o&1&&(r(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Registrati"),m(),r(4,"form",3),f(5,"it-input",4)(6,"it-input",5)(7,"it-input",6)(8,"it-input",7)(9,"it-input",8)(10,"it-select",9),r(11,"button",10),C("click",function(){return n.signUp()}),a(12,"Retgistrati"),m()()()()),o&2&&(u(4),d("formGroup",n.signupForm),u(6),d("options",n.options))},dependencies:[N,I,M,F,b,w,S,T],styles:["#signup-div[_ngcontent-%COMP%]{height:100vh}"]});let t=e;return t})();var ee=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:L},{path:"registrati",component:K},{path:"studenti",loadChildren:()=>import("./chunk-J5MT7TJ5.js").then(t=>t.StudentsModule),canActivate:[D],data:{expectedHomeType:"studente"}},{path:"insegnanti",loadChildren:()=>import("./chunk-GKQMQHC6.js").then(t=>t.TeachersModule),canActivate:[D],data:{expectedHomeType:"insegnante"}},{path:"**",component:L}],J=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=y({type:e}),e.\u0275inj=v({imports:[j.forRoot(ee),j]});let t=e;return t})();var Q=(()=>{let e=class e{constructor(){this.title="School"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=p({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,n){o&1&&f(0,"router-outlet")},dependencies:[A]});let t=e;return t})();var W=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=y({type:e,bootstrap:[Q]}),e.\u0275inj=v({providers:[U(_())],imports:[E,J,H.forRoot(),P,O]});let t=e;return t})();q().bootstrapModule(W).catch(t=>console.error(t));
