import{A,G as R,H as z,J as V,N as l,O as q,P as U,b as F,c as S,d as N,e as P,g as L,h,j as x,k as v,l as M,m as j,n as B,o as G,p as C,r as O,s as _,t as k,u as D,v as E,z as H}from"./chunk-CBCO7BFG.js";import{Db as T,Ob as s,Va as d,Wa as u,Y as m,ba as y,fa as c,ga as p,kb as f,vb as n,wb as a,xb as g}from"./chunk-6W7VELQ7.js";var b=(t,e)=>{let I=y(v),i=t.data.expectedHomeType,o=I.GetAccountType();return!0};var K=(()=>{let e=class e{constructor(i,o,r){this.auth=i,this.router=o,this.errorHandler=r,this.loginForm=new G({email:new C("",[R.email,M.required]),password:new C(""),accountType:new C("",M.required)}),this.options=[{text:"Seleziona un opzione",value:null,selected:!0,disabled:!0},{text:"Studente",value:"Studente",selected:!1,disabled:!1},{text:"Insegnante",value:"Insegnante",selected:!1,disabled:!1}],this.isLoading=!1}ngOnInit(){this.auth.getCsrfToken().subscribe({next:i=>{console.log(i)},error:i=>{this.errorHandler.handle(i)}})}logIn(){this.isLoading=!0;let i={email:this.loginForm.value.email,password:this.loginForm.value.password,type:this.loginForm.value.accountType};this.auth.logIn(i,this.header).subscribe({next:o=>{this.auth.setUser(this.loginForm.value.accountType.toLowerCase());let r=this.auth.GetAccountType();r==="studente"?this.router.navigate(["/studenti"]):r==="insegnante"&&this.router.navigate(["/insegnanti"])},error:o=>this.errorHandler.handle(o)})}};e.\u0275fac=function(o){return new(o||e)(u(v),u(h),u(U))},e.\u0275cmp=c({type:e,selectors:[["app-login"]],decls:19,vars:4,consts:[["id","background-div",1,"d-flex"],["id","welcome-div",1,"col-6","d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column"],[1,"text-center"],["id","login-div",1,"col-6","d-flex","justify-content-center","align-items-center"],[1,"d-flex","flex-column",3,"formGroup"],["label","Email","formControlName","email"],["label","Password","formControlName","password"],["label","tipologia account","formControlName","accountType",3,"options"],["itButton","primary","type","submit",3,"click","progress","disabled"]],template:function(o,r){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),s(4,"Benvenuti"),a(),n(5,"p",3),s(6," Questa piattaforma mira a sostenere sia studenti che insegnanti. "),a(),n(7,"p",3),s(8," Gli studenti potranno trovare gli esercizi assegnati dagli insegnanti in maniera centralizzata inoltre gli studenti potranno avvalersi di un tutor IA. "),a()()(),n(9,"div",4)(10,"div",2)(11,"h3",3),s(12,"Login"),a(),n(13,"form",5),g(14,"it-input",6)(15,"it-input",7)(16,"it-select",8),n(17,"button",9),T("click",function(){return r.logIn()}),s(18,"Log In"),a()()()()()),o&2&&(d(13),f("formGroup",r.loginForm),d(3),f("options",r.options),d(),f("progress",r.isLoading)("disabled",r.isLoading))},dependencies:[A,H,z,V,O,j,B,_,k],styles:["#welcome-div[_ngcontent-%COMP%]{background-color:#06c;height:100vh}h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#fff}#login-div[_ngcontent-%COMP%]{height:100vh}#login-div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], #login-div[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000}"]});let t=e;return t})();var Y=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:K},{path:"studenti",loadChildren:()=>import("./chunk-3R3JPYO3.js").then(t=>t.StudentsModule),canActivate:[b],data:{expectedHomeType:"studente"}},{path:"insegnanti",loadChildren:()=>import("./chunk-2EFWDPHQ.js").then(t=>t.TeachersModule),canActivate:[b],data:{expectedHomeType:"insegnante"}},{path:"error/forbidden",component:l,data:{errorCode:403,showBackButton:!1,errorTitle:"Permesso Negato",errorDescription:"Mi dispiace non hai pi\xF9 i permessi per accedere alle risorse."}},{path:"error/server-error",component:l,data:{errorCode:500,showBackButton:!1}},{path:"error/not-found",component:l,data:{errorCode:404}},{path:"**",component:l,data:{errorCode:404}}],Q=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=p({type:e}),e.\u0275inj=m({imports:[x.forRoot(Y),x]});let t=e;return t})();var J=(()=>{let e=class e{constructor(){this.title="School"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=c({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(o,r){o&1&&g(0,"router-outlet")},dependencies:[L]});let t=e;return t})();var W=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=p({type:e,bootstrap:[J]}),e.\u0275inj=m({providers:[F(S())],imports:[P,Q,q.forRoot(),E,D]});let t=e;return t})();N().bootstrapModule(W).catch(t=>console.error(t));
