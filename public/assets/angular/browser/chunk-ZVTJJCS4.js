import{A as mt,B as A,C as L,E as pt,G as dt,H as ut,I as ht,J as ft,K as gt,a as tt,f as et,g as it,h as nt,i as ot,j as q,k as rt,l as st,m as F,n as N,o as T,p as O,r as j,s as R,t as M,v as at,w as x,x as lt,y as ct,z as X}from"./chunk-Z7PNXAOA.js";import{Bb as $,Db as f,Eb as g,Fc as y,Gc as C,Hc as J,Ib as W,Lc as Q,Nb as D,Ob as a,Pb as k,Qb as Y,Rb as Z,Va as l,Wa as d,X as B,Y as _,aa as P,bc as K,fa as u,ga as I,ib as h,kb as m,pa as U,qa as V,vb as o,wb as r,xb as c,yb as b,zb as E}from"./chunk-6W7VELQ7.js";var v=(()=>{let e=class e{constructor(t){this.http=t,this.token=""}getCookie(t){let i=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return i?i[2]:null}getSubjects(t){let i=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/api/subjects",t,{headers:{"X-XSRF-TOKEN":i,Accept:"application/json"},withCredentials:!0})}getExercise(t){let i=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/api/exercise",t,{headers:{"X-XSRF-TOKEN":i,Accept:"application/json"},withCredentials:!0})}toAnswer(t,i){let s=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/api/answer",t,{headers:{"X-XSRF-TOKEN":s,Accept:"application/json"},withCredentials:!0})}logOut(){let t=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/logout",{},{headers:{"X-XSRF-TOKEN":t,Accept:"application/json"},withCredentials:!0})}chatWithIA(t){let i={model:"mistral-small-latest",messages:[{role:"user",content:t}]};return this.http.post("https://api.mistral.ai/v1/chat/completions",i,{headers:{"Content-Type":"application/json",Authorization:"Bearer nNzf3q8GYnGxdY2B55WyNbEUPESfktLX"}})}storeChats(t){let i=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/api/chats",t,{headers:{"X-XSRF-TOKEN":i,Accept:"application/json"},withCredentials:!0})}extractTopics(t){let i={model:"mistral-small-latest",messages:[{role:"user",content:"A quale branca appartiene"+t+"? rispondi con una parola e in maniera pi\xF9 specifica possibile nell'ambito della materia"}]};return this.http.post("https://api.mistral.ai/v1/chat/completions",i,{headers:{"Content-Type":"application/json",Authorization:"Bearer nNzf3q8GYnGxdY2B55WyNbEUPESfktLX"}})}storeStats(t){let i=decodeURIComponent(this.getCookie("XSRF-TOKEN"));return this.http.post("http://localhost:8000/api/stats",t,{headers:{"X-XSRF-TOKEN":i,Accept:"application/json"},withCredentials:!0})}};e.\u0275fac=function(i){return new(i||e)(P(tt))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var vt=(()=>{let e=class e{constructor(t,i,s){this.auth=t,this.router=i,this.studentService=s,this.switchClass=!0,this.activeElement=0}switcher(t){this.switchClass=t}setActive(t){this.activeElement=t}logOut(){this.studentService.logOut().subscribe(t=>{this.auth.setUser(""),this.router.navigate(["/login"])})}};e.\u0275fac=function(i){return new(i||e)(d(rt),d(nt),d(v))},e.\u0275cmp=u({type:e,selectors:[["app-home-student"]],decls:34,vars:2,consts:[["slimTitle","Ministero dell'Istruzione e del Merito","slimTitleLink","https://www.miur.gov.it/"],["slimRightZone","","mode","nav"],["button",""],["name","user","color","white","size","xl"],["list",""],["name","settings"],[3,"click"],["name","logout"],["brand",""],["href","#"],["name","pa"],[1,"it-brand-text"],[1,"it-brand-title"],[1,"it-brand-tagline","d-none","d-md-block"],["navItems",""],["routerLink","compiti","aria-current","page",3,"click","ngClass"],["name","bookmark","color","white"],["aria-current","page","routerLink","chat",3,"click","ngClass"],["name","comment","color","white"]],template:function(i,s){i&1&&(o(0,"div")(1,"div")(2,"it-header",0)(3,"it-dropdown",1)(4,"span",2),c(5,"it-icon",3),r(),b(6,4),o(7,"it-dropdown-item"),c(8,"it-icon",5),a(9," Impostazioni"),r(),o(10,"it-dropdown-item",6),f("click",function(){return s.logOut()}),c(11,"it-icon",7),a(12," Log Out"),r(),E(),r(),b(13,8),o(14,"a",9),c(15,"it-icon",10),o(16,"div",11)(17,"div",12),a(18,"Tipo di Istituto"),r(),o(19,"div",13),a(20,"Nome della Scuola"),r()()(),E(),b(21,14),o(22,"it-navbar-item")(23,"a",15),f("click",function(){return s.switcher(!0)}),o(24,"span"),c(25,"it-icon",16),a(26," Compiti"),r()()(),o(27,"it-navbar-item")(28,"a",17),f("click",function(){return s.switcher(!1)}),o(29,"span"),c(30,"it-icon",18),a(31," Chat"),r()()(),E(),r()(),o(32,"div"),c(33,"router-outlet"),r()()),i&2&&(l(23),m("ngClass",s.switchClass?"nav-link active":"nav-link"),l(5),m("ngClass",s.switchClass?"nav-link":"nav-link active"))},dependencies:[y,it,ot,ct,lt,ht,ut,x]});let n=e;return n})();function bt(n,e){if(n&1&&(o(0,"it-list-item",3)(1,"span",4),a(2),r(),c(3,"it-icon",5),r()),n&2){let p=e.$implicit;W("href","/studenti/compiti/",p.id_exercise,""),l(2),k(p.name)}}var Ct=(()=>{let e=class e{constructor(t){this.studentService=t}ngOnInit(){this.studentService.getSubjects({id:3}).subscribe(t=>{this.subjects=t.subs,console.log(t)})}};e.\u0275fac=function(i){return new(i||e)(d(v))},e.\u0275cmp=u({type:e,selectors:[["app-homework"]],decls:3,vars:1,consts:[[1,"d-flex","justify-content-center"],["navItems","",1,"w-75"],["externalLink","false",3,"href",4,"ngFor","ngForOf"],["externalLink","false",3,"href"],[1,"text"],["name","chevron-right","color","primary"]],template:function(i,s){i&1&&(o(0,"div",0)(1,"it-list",1),h(2,bt,4,3,"it-list-item",2),r()()),i&2&&(l(2),m("ngForOf",s.subjects))},dependencies:[C,A,L,x]});let n=e;return n})();function kt(n,e){if(n&1&&(o(0,"div",13),c(1,"div",14),o(2,"it-card",15)(3,"h3",16),a(4),r()(),c(5,"div",14),r()),n&2){let p=e.$implicit,t=e.index;l(),m("ngClass",t%2==0?"none":"arrow-left"),l(3),k(p),l(),m("ngClass",t%2==0?"arrow-right":"none")}}var xt=(()=>{let e=class e{constructor(t){this.studentsService=t,this.studentChat=[],this.aiChat=[],this.chats=["hey","llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll"],this.chatForm=new T({message:new O("")})}ngOnInit(){}sendMessage(){let t={message:this.chatForm.value.message};this.chats.push(this.chatForm.value.message),this.studentsService.chatWithIA(this.chatForm.value.message).subscribe(i=>this.chats.push(i.choices[0].message.content)),this.studentsService.extractTopics(this.chatForm.value.message).subscribe(i=>{let w={name:i.choices[0].message.content};this.studentsService.storeStats(w).subscribe(_t=>console.log(_t))})}};e.\u0275fac=function(i){return new(i||e)(d(v))},e.\u0275cmp=u({type:e,selectors:[["app-chat"]],decls:21,vars:2,consts:[["id","outer",1,"d-flex","flex-column"],["id","sidebar"],["header","Chat precedenti","withLeftLine","true"],["linkList","true"],["size","medium","active","true","href","#"],["size","medium","href","#"],["id","dialogs",1,"d-flex","align-items-center","flex-column"],["class","d-flex justify-content-center w-75",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center"],[3,"formGroup"],["label","Scrivi la tua domanda","formControlName","message"],["name","pencil","size","sm","color","primary","prependText",""],["itButton","primary","append","","type","submit",3,"click"],[1,"d-flex","justify-content-center","w-75"],[3,"ngClass"],["space","true","background","true"],[1,"card-title","h5"]],template:function(i,s){i&1&&(o(0,"div",0)(1,"div",1)(2,"it-sidebar",2)(3,"it-list",3)(4,"it-list-item",4)(5,"span"),a(6,"Link lista 1"),r()(),o(7,"it-list-item",5)(8,"span"),a(9,"Link lista 3"),r()(),o(10,"it-list-item",5)(11,"span"),a(12,"Link lista 4"),r()()()()(),o(13,"div",6),h(14,kt,6,3,"div",7),r(),o(15,"div",8)(16,"form",9)(17,"it-input",10),c(18,"it-icon",11),o(19,"button",12),f("click",function(){return s.sendMessage()}),a(20,"Invia"),r()()()()()),i&2&&(l(14),m("ngForOf",s.chats),l(2),m("formGroup",s.chatForm))},dependencies:[y,C,X,mt,A,L,pt,ft,x,j,F,N,R,M],styles:["#outer[_ngcontent-%COMP%]{height:75vh}#sidebar[_ngcontent-%COMP%]{width:20%;position:absolute}#dialogs[_ngcontent-%COMP%]{margin-top:10px;height:90%}it-card[_ngcontent-%COMP%]{width:60%;margin-top:10px}.arrow-left[_ngcontent-%COMP%]{margin-top:10px;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid hsl(210,100%,40%)}.arrow-right[_ngcontent-%COMP%]{margin-top:10px;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-left:10px solid hsl(210,100%,40%)}.none[_ngcontent-%COMP%]{display:none}"]});let n=e;return n})();function yt(n,e){}function Ft(n,e){n&1&&h(0,yt,0,0,"ng-template")}function Nt(n,e){if(n&1){let p=$();o(0,"form",6),a(1),c(2,"it-textarea",7),o(3,"button",8),f("click",function(){U(p);let i=g().$implicit,s=g();return V(s.toAnswer(i.id))}),a(4,"Invia"),r()()}if(n&2){let p=g().$implicit,t=g();m("formGroup",t.questionFormGroups[p.id]),l(),Y(" ",p.questions," "),l(),m("rows",5)}}function Tt(n,e){if(n&1&&(o(0,"p",9),a(1),r()),n&2){let p=g(),t=p.$implicit,i=p.index,s=g();l(),Z("",t.questions,": ",s.evaluations[i].evaluation,"")}}function Ot(n,e){if(n&1&&(o(0,"div",4),h(1,Ft,1,0,null,5)(2,Nt,5,3,"ng-template",null,0,K)(4,Tt,2,2,"ng-template",null,1,K),r()),n&2){let p=e.index,t=D(3),i=D(5),s=g();l(),m("ngIf",s.evaluations[p]===null)("ngIfThen",t)("ngIfElse",i)}}var St=(()=>{let e=class e{constructor(t,i){this.route=t,this.studentService=i,this.questionFormGroups={}}ngOnInit(){this.route.params.subscribe(t=>this.studentService.getExercise(t).subscribe(i=>{this.questions=i.exercise,i.exercise.forEach(s=>{this.questionFormGroups[s.id.toString()]=new T({answer:new O("",st.required)})}),this.evaluations=i.evaluations}))}toAnswer(t){let i={id:t,answer:this.questionFormGroups[t].value.answer};this.studentService.toAnswer(i,t).subscribe(s=>console.log(s))}};e.\u0275fac=function(i){return new(i||e)(d(et),d(v))},e.\u0275cmp=u({type:e,selectors:[["app-exercise"]],decls:4,vars:1,consts:[["bloccoIf",""],["bloccoElse",""],[1,"d-flex","align-items-center","flex-column"],["class","d-flex justify-content-center w-100",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","w-100"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"w-75",3,"formGroup"],["formControlName","answer",3,"rows"],["itButton","primary",3,"click"],[1,"w-75"]],template:function(i,s){i&1&&(o(0,"div",2)(1,"h5"),a(2,"Domande"),r(),h(3,Ot,6,3,"div",3),r()),i&2&&(l(3),m("ngForOf",s.questions))},dependencies:[C,J,X,dt,j,F,N,R,M]});let n=e;return n})();var jt=[{path:"",component:vt,children:[{path:"",redirectTo:"compiti",pathMatch:"full"},{path:"compiti",component:Ct},{path:"chat",component:xt},{path:"compiti/:id",component:St}]}],wt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=I({type:e}),e.\u0275inj=_({imports:[q.forChild(jt),q]});let n=e;return n})();var re=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=I({type:e}),e.\u0275inj=_({imports:[Q,wt,gt.forRoot(),at]});let n=e;return n})();export{re as StudentsModule};
