import{A as L,C as Ce,D as Se,E as q,F as _e,I as we,J as Ie,K as xe,L as Ee,M as be,O as ye,P as C,a as ee,f as te,g as ie,h as ne,i as oe,j as G,k as re,l as se,m as A,n as ae,o as le,p as ce,q as me,r as pe,s as de,t as ue,u as he,v as fe,w as D,x as ge,y as ve}from"./chunk-D24RSDDE.js";import{Bb as X,Db as v,Eb as x,Fc as J,Gc as _,Hb as M,Hc as H,Ib as Z,Lc as Y,Ob as l,Pb as b,Qb as O,R as Q,Rb as $,Sa as F,Sb as j,Tb as N,Ub as V,Va as a,Wa as p,X as B,Y as k,aa as P,fa as f,ga as T,ib as g,kb as m,pa as U,qa as K,vb as s,wb as r,xb as u,yb as w,zb as I}from"./chunk-6W7VELQ7.js";var S=(()=>{let t=class t{constructor(e){this.http=e}getCookie(){let e=document.cookie.match(new RegExp("(^| )XSRF-TOKEN=([^;]+)"));return e?{headers:{"X-XSRF-TOKEN":decodeURIComponent(e[2]),Accept:"application/json"},withCredentials:!0}:new Error}getClasses(){return this.http.get("/api/classes",this.getCookie())}getStudentAnswer(e){return this.http.post("/api/stuans",e,this.getCookie())}toEvaluation(e){return this.http.post("/api/evaluate",e,this.getCookie())}getAll(){return this.http.get("/api/archive",this.getCookie())}assign(e){return this.http.post("/api/assign",e,this.getCookie())}logOut(){return this.http.post("/logout",{},this.getCookie())}getStats(){return this.http.get("/api/stats",this.getCookie())}};t.\u0275fac=function(i){return new(i||t)(P(ee))},t.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ke=(()=>{let t=class t{constructor(e,i,o,h){this.teacherService=e,this.auth=i,this.router=o,this.errorHandler=h,this.switchClass=0}switcher(e,i){this.switchClass=i,e.target.blur()}logOut(){this.teacherService.logOut().subscribe({next:e=>{this.auth.setUser(""),this.router.navigate(["/login"])},error:e=>this.errorHandler.handle(e)})}};t.\u0275fac=function(i){return new(i||t)(p(S),p(re),p(ne),p(C))},t.\u0275cmp=f({type:t,selectors:[["app-home-teacher"]],decls:36,vars:3,consts:[["slimTitle","Ministero dell'Istruzione e del Merito","slimTitleLink","https://www.miur.gov.it/","showSearch","false"],["slimRightZone","","mode","nav"],["button",""],["name","user","color","white","size","xl"],["list",""],[3,"click"],["name","logout"],["brand",""],["href","#"],["name","pa"],[1,"it-brand-text"],[1,"it-brand-title"],[1,"it-brand-tagline","d-none","d-md-block"],["navItems",""],["routerLink","compiti","aria-current","page",3,"click","ngClass"],["name","bookmark","color","white"],["routerLink","assegnazione","aria-current","page",3,"click","ngClass"],["aria-current","page","routerLink","statistics",3,"click","ngClass"],["name","comment","color","white"]],template:function(i,o){i&1&&(s(0,"div")(1,"div")(2,"it-header",0)(3,"it-dropdown",1)(4,"span",2),u(5,"it-icon",3),r(),w(6,4),s(7,"it-dropdown-item",5),v("click",function(){return o.logOut()}),u(8,"it-icon",6),l(9," Log Out"),r(),I(),r(),w(10,7),s(11,"a",8),u(12,"it-icon",9),s(13,"div",10)(14,"div",11),l(15,"Tipo di Istituto"),r(),s(16,"div",12),l(17,"Nome della Scuola"),r()()(),I(),w(18,13),s(19,"it-navbar-item")(20,"a",14),v("click",function(d){return o.switcher(d,0)}),s(21,"span"),u(22,"it-icon",15),l(23,"Correzione Compiti"),r()()(),s(24,"it-navbar-item")(25,"a",16),v("click",function(d){return o.switcher(d,1)}),s(26,"span"),u(27,"it-icon",15),l(28,"Assegnazione Compiti"),r()()(),s(29,"it-navbar-item")(30,"a",17),v("click",function(d){return o.switcher(d,2)}),s(31,"span"),u(32,"it-icon",18),l(33," Statistiche"),r()()(),I(),r()(),s(34,"div"),u(35,"router-outlet"),r()()),i&2&&(a(20),m("ngClass",o.switchClass==0?"nav-link active":"nav-link"),a(5),m("ngClass",o.switchClass==1?"nav-link active":"nav-link"),a(5),m("ngClass",o.switchClass==2?"nav-link active":"nav-link"))},dependencies:[J,ie,oe,ve,ge,be,Ee,D]});let n=t;return n})();function Ve(n,t){if(n&1&&(s(0,"it-list-item",3)(1,"span",4),l(2),r(),u(3,"it-icon",5),r()),n&2){let c=t.$implicit;Z("href","/insegnanti/compiti/",c.id,""),a(2),b(c.name)}}var Te=(()=>{let t=class t{constructor(e,i){this.teacherService=e,this.errorHandler=i}ngOnInit(){this.teacherService.getClasses().subscribe({next:e=>this.classes=e.classes,error:e=>{this.errorHandler.handle(e)}})}};t.\u0275fac=function(i){return new(i||t)(p(S),p(C))},t.\u0275cmp=f({type:t,selectors:[["app-homework"]],decls:3,vars:1,consts:[[1,"d-flex","justify-content-center"],["navItems","",1,"w-75"],["externalLink","false",3,"href",4,"ngFor","ngForOf"],["externalLink","false",3,"href"],[1,"text"],["name","chevron-right","color","primary"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"it-list",1),g(2,Ve,4,3,"it-list-item",2),r()()),i&2&&(a(2),m("ngForOf",o.classes))},dependencies:[_,Ce,Se,D]});let n=t;return n})();function Ae(n,t){if(n&1&&(s(0,"p"),u(1,"img",8),s(2,"h5"),l(3,"Risposta:"),r(),l(4),r()),n&2){let c=x().$implicit;a(),M("src",c.question,F),a(3),O(" ",c.answer,"")}}function De(n,t){if(n&1&&(s(0,"p"),l(1),r()),n&2){let c=x().$implicit;a(),$("",c.question," ",c.answer,"")}}function Le(n,t){if(n&1){let c=X();s(0,"div",3)(1,"form",4),g(2,Ae,5,2,"p",5)(3,De,2,2,"p",5),u(4,"it-textarea",6),s(5,"button",7),v("click",function(){let i=U(c).$implicit,o=x();return K(o.toEvaluate(i.id))}),l(6,"Invia"),r()()()}if(n&2){let c=t.$implicit,e=x();a(),m("formGroup",e.questionFormGroups[c.id]),a(),m("ngIf",c.question.startsWith("data:image/jpeg;base64")),a(),m("ngIf",!c.question.startsWith("data:image/jpeg;base64")),a(),m("rows",5),a(),m("disabled",!e.questionFormGroups[c.id].valid)}}var Fe=(()=>{let t=class t{constructor(e,i,o,h){this.route=e,this.teacherService=i,this.errorHandler=o,this.notificationService=h,this.questionFormGroups={},this.text="VAlutazionre assegnata."}ngOnInit(){this.route.params.pipe(Q(e=>this.teacherService.getStudentAnswer(e))).subscribe({next:e=>{this.answers=e.student_answer,this.answers.forEach(i=>{this.questionFormGroups[i.id]=new le({answer:new ce("",se.required)})})},error:e=>this.errorHandler.handle(e)})}toEvaluate(e){let i={id:e,evaluation:this.questionFormGroups[e].value.answer};this.questionFormGroups[e].value.answer="",this.teacherService.toEvaluation(i).subscribe({next:o=>this.notificationService.success("Notifica Successo",this.text),error:o=>this.errorHandler.handle(o)})}};t.\u0275fac=function(i){return new(i||t)(p(te),p(S),p(C),p(q))},t.\u0275cmp=f({type:t,selectors:[["app-exercise-teacher"]],decls:4,vars:1,consts:[[1,"d-flex","align-items-center","flex-column"],[1,"mb-5"],["class","d-flex justify-content-center w-100",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","w-100"],[1,"w-75",3,"formGroup"],[4,"ngIf"],["formControlName","answer",3,"rows"],["itButton","primary",3,"click","disabled"],[3,"src"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"h5",1),l(2,"Domande"),r(),g(3,Le,7,5,"div",2),r()),i&2&&(a(3),m("ngForOf",o.answers))},dependencies:[_,H,L,xe,pe,A,ae,de,ue]});let n=t;return n})();function qe(n,t){if(n&1&&(s(0,"div",8)(1,"h6"),l(2),r(),u(3,"img",9),r()),n&2){let c=t.$implicit,e=t.index;a(2),O("Immagine ",e+1,""),a(),M("src",c,F)}}function ze(n,t){if(n&1&&(s(0,"div")(1,"h3"),l(2,"Elenco Immagini"),r(),g(3,qe,4,2,"div",7),r()),n&2){let c=x();a(3),m("ngForOf",c.images)}}var Me=(()=>{let t=class t{constructor(e,i,o){this.teacherService=e,this.errorHandler=i,this.notificationService=o,this.selectedValueSubs=null,this.selectedValueQuest=null,this.selectedValueClass=null,this.subsSelected=!1,this.selectOptionsSubs=[],this.selectOptionsQuest=[],this.selectOptionsClass=[],this.images=[],this.text="Compiti assegnati."}ngOnInit(){this.teacherService.getAll().subscribe({next:e=>{e.subs.forEach((i,o)=>{this.selectOptionsSubs.push({value:i,text:i})}),this.data=e.archive,e.classes.forEach(i=>{this.selectOptionsClass.push({value:i,text:i})})},error:e=>this.errorHandler.handle(e)})}enableEx(){this.images=[],this.selectOptionsQuest=[],this.data[this.selectedValueSubs].forEach((e,i)=>{e.startsWith("data:image/jpeg;base64")?(this.images.push(e),this.selectOptionsQuest.push({value:e,text:"Immagine "+String(i)})):this.selectOptionsQuest.push({value:e,text:e})})}assignExercise(){let e={subject:this.selectedValueSubs,questions:this.selectedValueQuest,class:this.selectedValueClass};this.teacherService.assign(e).subscribe({next:i=>this.notificationService.success("Notifica Successo",this.text),error:i=>this.notificationService.error("Errore del server","Ritenta pi\xF9 tardi.")})}};t.\u0275fac=function(i){return new(i||t)(p(S),p(C),p(q))},t.\u0275cmp=f({type:t,selectors:[["app-assignement"]],decls:11,vars:9,consts:[[1,"d-flex","flex-column","align-items-center"],[1,"w-75"],["defaultOption","Seleziona un elemento",3,"ngModelChange","ngModel","options"],["defaultOption","Seleziona un elemento",3,"ngModelChange","ngModel","options","disabled"],["itButton","primary",3,"click","disabled"],[4,"ngIf"],["dismissible","true"],["class","d-flex",4,"ngFor","ngForOf"],[1,"d-flex"],[3,"src"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"div",1)(2,"it-select",2),V("ngModelChange",function(d){return N(o.selectedValueSubs,d)||(o.selectedValueSubs=d),d}),v("ngModelChange",function(){return o.enableEx()}),r()(),s(3,"div",1)(4,"it-select",3),V("ngModelChange",function(d){return N(o.selectedValueQuest,d)||(o.selectedValueQuest=d),d}),r()(),s(5,"div",1)(6,"it-select",2),V("ngModelChange",function(d){return N(o.selectedValueClass,d)||(o.selectedValueClass=d),d}),r()(),s(7,"button",4),v("click",function(){return o.assignExercise()}),l(8,"Assegna Compiti"),r()(),g(9,ze,4,1,"div",5),u(10,"it-notifications",6)),i&2&&(a(2),j("ngModel",o.selectedValueSubs),m("options",o.selectOptionsSubs),a(2),j("ngModel",o.selectedValueQuest),m("options",o.selectOptionsQuest)("disabled",o.selectedValueSubs===null),a(2),j("ngModel",o.selectedValueClass),m("options",o.selectOptionsClass),a(),m("disabled",o.selectedValueClass=="Seleziona un elemento"),a(2),m("ngIf",o.images.length!=0))},dependencies:[_,H,L,_e,Ie,A,me],styles:["div[_ngcontent-%COMP%]{margin-top:10px}"]});let n=t;return n})();function Re(n,t){if(n&1&&(s(0,"tr")(1,"th",5),l(2),r(),s(3,"td"),l(4),r()()),n&2){let c=t.$implicit;a(2),b(c.name),a(2),b(c.number)}}var Oe=(()=>{let t=class t{constructor(e,i){this.teacherService=e,this.errorHandler=i}ngOnInit(){this.teacherService.getStats().subscribe({next:e=>this.statistics=e,error:e=>this.errorHandler.handle(e)})}};t.\u0275fac=function(i){return new(i||t)(p(S),p(C))},t.\u0275cmp=f({type:t,selectors:[["app-statistics"]],decls:10,vars:1,consts:[["color","dark",1,"w-75"],["thead",""],["scope","col"],["tbody",""],[4,"ngFor","ngForOf"],["scope","row"]],template:function(i,o){i&1&&(s(0,"div")(1,"it-table",0),w(2,1),s(3,"tr")(4,"th",2),l(5,"Nome Materia"),r(),s(6,"th",2),l(7,"Numero di Studenti"),r()(),I(),w(8,3),g(9,Re,5,2,"tr",4),I(),r()()),i&2&&(a(9),m("ngForOf",o.statistics))},dependencies:[_,we]});let n=t;return n})();var We=[{path:"",component:ke,children:[{path:"",redirectTo:"compiti",pathMatch:"full"},{path:"compiti",component:Te},{path:"assegnazione",component:Me},{path:"compiti/:id",component:Fe},{path:"statistics",component:Oe}]}],je=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=T({type:t}),t.\u0275inj=k({imports:[G.forChild(We),G]});let n=t;return n})();var St=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=T({type:t}),t.\u0275inj=k({imports:[Y,je,ye,fe,he]});let n=t;return n})();export{St as TeachersModule};
